<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>問題解答</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}"> <!-- サイドバー用の外部CSS -->
    <style>
        .grading-container {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #f9f9f9;
        }
    </style>
    
</head>
<body>
    <div class="container">
        {% include 'studentmenu/studentsidebar.html' %} <!-- サイドバー -->
        <div class="grading-container">
            <h2>{{ question.content }}</h2>
            <p>解答:</p>

            <!-- 解答フォーム -->
            <form method="POST">
                {% csrf_token %}
                
                {% if question.question_type == 'objective' %}
                    <!-- 選択問題の場合 -->
                    {% for choice in question.get_choices %}
                        <label>
                            <input type="radio" name="answer" value="{{ choice }}" 
                                {% if temp_answer and temp_answer.answer_text == choice %}checked{% endif %}>
                            {{ choice }}
                        </label><br>
                    {% endfor %}
                {% else %}
                    <!-- 記述問題の場合 -->
                    <textarea name="answer" rows="4" cols="50">
                        {% if temp_answer %}
                            {{ temp_answer.answer_text }}
                        {% endif %}
                    </textarea>
                {% endif %}
                
                <br>
                <button type="submit" name="save">一時保存</button>
            </form>

            <!-- 戻るボタン -->
            <br>
            <a href="{% url 'studentstart_test' test.test_id %}">戻る</a>

            {% if error_message %}
                <p style="color: red;">{{ error_message }}</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
