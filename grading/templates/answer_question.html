<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>問題解答</title>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <h2>{{ question.content }}</h2>
            <p>解答:</p>

            <!-- 解答フォーム -->
            <form method="POST">
                {% csrf_token %}
                
                {% if question.question_type == 'objective' %}
                    <!-- 選択問題の場合 -->
                    {% for choice in question.get_choices %}
                        <label>
                            <input type="radio" name="answer" value="{{ choice }}" 
                                {% if temp_answer and temp_answer.answer_text == choice %}checked{% endif %}>
                            {{ choice }}
                        </label><br>
                    {% endfor %}
                {% else %}
                    <!-- 記述問題の場合 -->
                    <textarea name="answer" rows="4" cols="50">
                        {% if temp_answer %}
                            {{ temp_answer.answer_text }}
                        {% endif %}
                    </textarea>
                {% endif %}
                
                <br>
                <button type="submit" name="save">一時保存</button>
                <button type="submit" name="submit">最終提出</button>
            </form>

            <!-- 戻るボタン -->
            <br>
            <a href="{% url 'start_test' test.test_id %}">戻る</a>

            {% if error_message %}
                <p style="color: red;">{{ error_message }}</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
